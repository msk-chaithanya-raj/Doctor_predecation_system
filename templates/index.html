<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HealthCenter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      .dark-mode {
        background-color: #1a1a1a;
        color: #e5e5e5;
      }
      .container-box {
        background-color: rgba(26, 26, 26, 0.9);
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .result-card {
        transition: all 0.3s ease;
        cursor: pointer;
      }
      .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
      }
      body {
        background-color: #f5f5f5;
      }
    </style>
  </head>
  <body class="flex flex-col min-h-screen">
    <!-- Navbar -->
    <nav class="bg-[#2c3e50] p-4 shadow-md">
      <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center">
          <img
            class="w-12 h-12 rounded-full border-2 border-gray-300"
            src="{{ url_for('static', filename='logo.png') }}"
            alt="Logo"
          />
          <a
            class="text-white text-xl font-semibold ml-3 tracking-wide"
            href="#"
            >AI Health Center</a
          >
        </div>
        <button
          id="darkModeToggle"
          class="text-white px-4 py-2 rounded-lg transition hover:bg-[#34495e]"
        >
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </nav>

    <!-- Main Form -->
    <h1
      class="mt-6 text-center text-4xl font-bold text-[#2c3e50] tracking-wide"
    >
      Health Care Center
    </h1>
    <div
      class="container mx-auto mt-6 p-6 container-box text-white w-11/12 md:w-1/2"
    >
      <form action="/predict" method="post">
        <label class="block text-lg font-semibold text-[#3498db] mb-2"
          >Select Symptoms:</label
        >
        <input
          type="text"
          name="symptoms"
          class="w-full p-3 rounded-lg border border-gray-300 bg-[#34495e] text-white focus:border-[#3498db]"
          placeholder="Type symptoms such as itching, sleeping, aching..."
        />
        <div name="mysysms" id="transcription" class="mt-3"></div>
        {% if message %}
        <div
          class="mt-4 bg-[#c0392b] text-white p-3 rounded-md text-center font-semibold"
        >
          {{ message }}
        </div>
        {% endif %}
        <button
          type="submit"
          class="w-full mt-4 p-3 bg-[#3498db] text-white font-bold rounded-lg hover:bg-[#2980b9] transition"
        >
          Predict
        </button>
      </form>
    </div>

    <!-- Results Section -->
    {% if predicted_disease %}
    <h1 class="text-center my-6 text-3xl font-semibold text-[#2c3e50]">
      Our AI System Results
    </h1>
    <div class="container mx-auto px-4 mb-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Disease Card -->
        <div
          class="result-card bg-[#3498db] text-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center"
          data-modal="diseaseModal"
        >
          <i class="fas fa-virus text-3xl mb-2"></i>
          <h3 class="text-xl font-bold">Disease</h3>
          <p class="text-sm mt-2 text-center">
            Click to view diagnosed disease
          </p>
        </div>

        <!-- Description Card -->
        <div
          class="result-card bg-[#16a085] text-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center"
          data-modal="descriptionModal"
        >
          <i class="fas fa-info-circle text-3xl mb-2"></i>
          <h3 class="text-xl font-bold">Description</h3>
          <p class="text-sm mt-2 text-center">
            Click to learn about the condition
          </p>
        </div>

        <!-- Precaution Card -->
        <div
          class="result-card bg-[#f39c12] text-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center"
          data-modal="precautionModal"
        >
          <i class="fas fa-shield-alt text-3xl mb-2"></i>
          <h3 class="text-xl font-bold">Precaution</h3>
          <p class="text-sm mt-2 text-center">
            Click to view recommended precautions
          </p>
        </div>

        <!-- Medications Card -->
        <div
          class="result-card bg-[#e74c3c] text-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center"
          data-modal="medicationsModal"
        >
          <i class="fas fa-pills text-3xl mb-2"></i>
          <h3 class="text-xl font-bold">Medications</h3>
          <p class="text-sm mt-2 text-center">
            Click to view suggested medications
          </p>
        </div>

        <!-- Workouts Card -->
        <div
          class="result-card bg-[#27ae60] text-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center"
          data-modal="workoutsModal"
        >
          <i class="fas fa-dumbbell text-3xl mb-2"></i>
          <h3 class="text-xl font-bold">Workouts</h3>
          <p class="text-sm mt-2 text-center">
            Click to view recommended exercises
          </p>
        </div>

        <!-- Diets Card -->
        <div
          class="result-card bg-[#8e44ad] text-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center"
          data-modal="dietsModal"
        >
          <i class="fas fa-utensils text-3xl mb-2"></i>
          <h3 class="text-xl font-bold">Diets</h3>
          <p class="text-sm mt-2 text-center">
            Click to view dietary recommendations
          </p>
        </div>
      </div>
    </div>
    {% endif %}

    <!-- Modals -->
    <div
      id="modals"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"
    >
      <div
        class="bg-white dark:bg-[#2c3e50] p-6 rounded-lg shadow-lg w-11/12 md:w-2/3 lg:w-1/2 max-h-[80vh] overflow-y-auto"
      >
        <div class="flex justify-between items-center border-b pb-3">
          <h2
            id="modalTitle"
            class="text-2xl font-bold text-[#2c3e50] dark:text-white"
          ></h2>
          <button
            class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-white text-xl"
            onclick="closeModal()"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div
          id="modalContent"
          class="mt-4 text-[#2c3e50] dark:text-white"
        ></div>
        <div class="mt-6 text-right">
          <button
            class="px-4 py-2 bg-[#34495e] text-white rounded-md hover:bg-[#2c3e50] transition"
            onclick="closeModal()"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      // Dark Mode Toggle
      document
        .getElementById("darkModeToggle")
        .addEventListener("click", function () {
          document.body.classList.toggle("dark-mode");
          this.innerHTML = document.body.classList.contains("dark-mode")
            ? '<i class="fas fa-sun"></i>'
            : '<i class="fas fa-moon"></i>';
        });

      // Modal System
      document.querySelectorAll("[data-modal]").forEach((card) => {
        card.addEventListener("click", function () {
          const modal = document.getElementById("modals");
          const modalType = card.getAttribute("data-modal");
          const title = card.querySelector("h3").innerText;
          let content = "";

          switch (modalType) {
            case "diseaseModal":
              content = "{{ predicted_disease }}";
              break;
            case "descriptionModal":
              content = "{{ dis_des }}";
              break;
            case "precautionModal":
              content =
                "<ul class='list-disc pl-5 space-y-2'>{% for i in my_precautions %}<li>{{ i }}</li>{% endfor %}</ul>";
              break;
            case "medicationsModal":
              content =
                "<ul class='list-disc pl-5 space-y-2'>{% for i in medications %}<li>{{ i }}</li>{% endfor %}</ul>";
              break;
            case "workoutsModal":
              content =
                "<ul class='list-disc pl-5 space-y-2'>{% for i in workout %}<li>{{ i }}</li>{% endfor %}</ul>";
              break;
            case "dietsModal":
              content =
                "<ul class='list-disc pl-5 space-y-2'>{% for i in my_diet %}<li>{{ i }}</li>{% endfor %}</ul>";
              break;
          }

          document.getElementById("modalTitle").innerText = title;
          document.getElementById("modalContent").innerHTML = content;
          modal.classList.remove("hidden");
        });
      });

      function closeModal() {
        document.getElementById("modals").classList.add("hidden");
      }

      // Close modal when clicking outside
      document.getElementById("modals").addEventListener("click", function (e) {
        if (e.target === this) {
          closeModal();
        }
      });

      // Close modal with Escape key
      document.addEventListener("keydown", function (e) {
        if (
          e.key === "Escape" &&
          !document.getElementById("modals").classList.contains("hidden")
        ) {
          closeModal();
        }
      });
    </script>

    <footer class="bg-[#2c3e50] text-white text-center py-4 mt-auto">
      <p>&copy; 2025 Nadella Teja. All rights reserved.</p>
    </footer>
  </body>
</html>
